{"version":3,"sources":["webpack:///./src/utils/SVGDom.ts?f8cf************","./src/ui/ResultFolding/ResultFolding.ts","./sass/_ResultFolding.scss","./src/ui/ResultFolding/DefaultFoldingTemplate.ts"],"names":[],"mappings":"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","file":"ResultFolding.js","sourcesContent":["import { $$ } from './Dom';\n\nexport class SVGDom {\n\n  public static addClassToSVGInContainer(svgContainer: HTMLElement, classToAdd: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', `${SVGDom.getClass(svgElement)}${classToAdd}`);\n  }\n\n  public static removeClassFromSVGInContainer(svgContainer: HTMLElement, classToRemove: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', SVGDom.getClass(svgElement).replace(classToRemove, ''));\n  }\n\n  private static getClass(svgElement: SVGElement) {\n    const className = svgElement.getAttribute('class');\n    return className ? className + ' ' : '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SVGDom.ts","import { Template } from '../Templates/Template';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { DefaultFoldingTemplate } from './DefaultFoldingTemplate';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Utils } from '../../utils/Utils';\nimport { QueryUtils } from '../../utils/QueryUtils';\nimport { Initialization, IInitializationParameters, IInitResult } from '../Base/Initialization';\nimport { Assert } from '../../misc/Assert';\nimport { $$ } from '../../utils/Dom';\nimport { l } from '../../strings/Strings';\nimport * as _ from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\n\nimport 'styling/_ResultFolding';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { SVGDom } from '../../utils/SVGDom';\n\nexport interface IResultFoldingOptions {\n  resultTemplate?: Template;\n  normalCaption?: string;\n  expandedCaption?: string;\n  moreCaption?: string;\n  lessCaption?: string;\n  oneResultCaption?: string;\n}\n\n/**\n * The `ResultFolding` component renders folded result sets. It is usable inside a result template when there is an\n * active [`Folding`]{@link Folding} component in the page. This component takes care of rendering the parent result and\n * its child results in a coherent manner.\n *\n * This component is a result template component (see [Result Templates](https://developers.coveo.com/x/aIGfAQ)).\n *\n * See [Folding Results](https://developers.coveo.com/x/7hUvAg).\n */\nexport class ResultFolding extends Component {\n  static ID = 'ResultFolding';\n\n  static doExport = () => {\n    exportGlobally({\n      'ResultFolding': ResultFolding,\n      'DefaultFoldingTemplate': DefaultFoldingTemplate\n    });\n  }\n\n  /**\n   * The options for the component\n   * @componentOptions\n   */\n  static options: IResultFoldingOptions = {\n\n    /**\n     * Specifies the template to use to render each of the child results for a top result.\n     *\n     * You can specify a previously registered template to use either by referring to its HTML `id` attribute or to a\n     * CSS selector (see {@link TemplateCache}).\n     *\n     * **Example:**\n     *\n     * Specifying a previously registered template by referring to its HTML `id` attribute:\n     *\n     * ```html\n     * <span class=\"CoveoResultFolding\" data-result-template-id=\"Foo\"></span>\n     * ```\n     *\n     * Specifying a previously registered template by referring to a CSS selector:\n     *\n     * ```html\n     * <span class='CoveoResultFolding' data-result-template-selector=\"#Foo\"></span>\n     * ```\n     *\n     * If you do not specify a custom folding template, the component uses the default result folding template.\n     */\n    resultTemplate: ComponentOptions.buildTemplateOption({ defaultFunction: () => new DefaultFoldingTemplate() }),\n\n    /**\n     * Specifies the caption to display at the top of the child results when the folding result set is not expanded.\n     *\n     * Default value is `undefined`, which displays no caption.\n     */\n    normalCaption: ComponentOptions.buildLocalizedStringOption(),\n\n    /**\n     * Specifies the caption to display at the top of the child results when the folding result set is expanded.\n     *\n     * Default value is `undefined`, which displays no caption.\n     */\n    expandedCaption: ComponentOptions.buildLocalizedStringOption(),\n\n    /**\n     * Specifies the caption to display on the link to expand / show child results.\n     *\n     * Default value is the localized string for `ShowMore`.\n     */\n    moreCaption: ComponentOptions.buildLocalizedStringOption({ postProcessing: (value) => value || l('ShowMore') }),\n\n    /**\n     * Specifies the caption to display on the link to shrink the loaded folding result set back to only the top result.\n     *\n     * Default value is the localized string for `ShowLess`.\n     */\n    lessCaption: ComponentOptions.buildLocalizedStringOption({ postProcessing: (value) => value || l('ShowLess') }),\n\n    /**\n     * Specifies the caption to display when there is only one result in a folding result set.\n     *\n     * Default value is the localized string for `DisplayingTheOnlyMessage`\n     */\n    oneResultCaption: ComponentOptions.buildLocalizedStringOption({ postProcessing: (value) => value || l('DisplayingTheOnlyMessage') })\n  };\n\n  private normalCaption: HTMLElement;\n  private expandedCaption: HTMLElement;\n  private oneResultCaption: HTMLElement;\n  private results: HTMLElement;\n  private showMore: HTMLElement;\n  private showLess: HTMLElement;\n  private waitAnimation: HTMLElement;\n  private moreResultsPromise: Promise<IQueryResult[]>;\n  private showingMoreResults = false;\n\n  public childResults: IQueryResult[];\n\n  /**\n   * Creates a new ResultFolding component.\n   * @param options The options for the ResultFolding component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The result to associate the component with.\n   */\n  constructor(public element: HTMLElement, public options?: IResultFoldingOptions, bindings?: IComponentBindings, public result?: IQueryResult) {\n    super(element, ResultFolding.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(this.element, ResultFolding, options);\n\n    Assert.exists(result);\n\n    this.buildElements();\n    this.displayThoseResults(this.result.childResults).then(() => {\n      this.updateElementVisibility();\n\n      if ($$(this.element.parentElement).hasClass('CoveoCardOverlay')) {\n        this.bindOverlayEvents();\n      }\n\n      if (this.result.childResults.length == 0 && !this.result.moreResults) {\n        $$(this.element).hide();\n      }\n    });\n  }\n\n  /**\n   *\n   * @returns {Promise<IQueryResult[]>}\n   */\n  public showMoreResults() {\n    Assert.exists(this.result.moreResults);\n\n    this.cancelAnyPendingShowMore();\n    this.moreResultsPromise = this.result.moreResults();\n    this.waitAnimation = $$('div', { className: 'coveo-loading-spinner' }).el;\n    this.results.appendChild(this.waitAnimation);\n    this.updateElementVisibility();\n\n    let ret = this.moreResultsPromise\n      .then((results?: IQueryResult[]) => {\n        this.childResults = results;\n        this.showingMoreResults = true;\n        return this.displayThoseResults(results).then(() => {\n          this.updateElementVisibility(results.length);\n          return results;\n        });\n\n      });\n\n    ret.finally(() => {\n      this.moreResultsPromise = undefined;\n      $$(this.waitAnimation).detach();\n      this.waitAnimation = undefined;\n    });\n\n    return ret;\n  }\n\n  public showLessResults() {\n    this.cancelAnyPendingShowMore();\n    this.showingMoreResults = false;\n    this.displayThoseResults(this.result.childResults);\n    this.updateElementVisibility();\n    this.scrollToResultElement();\n  }\n\n  private buildElements() {\n    this.buildHeader();\n    this.buildResults();\n    this.buildFooter();\n  }\n\n  private buildHeader() {\n    let header = $$('div', { className: 'coveo-folding-header' }).el;\n    this.element.appendChild(header);\n    if (this.options.normalCaption != undefined && this.options.expandedCaption != undefined) {\n      this.normalCaption = $$('div', { className: 'coveo-folding-normal-caption' }, this.options.normalCaption).el;\n      header.appendChild(this.normalCaption);\n\n      this.expandedCaption = $$('div', { className: 'coveo-folding-expanded-caption' }, this.options.expandedCaption).el;\n      header.appendChild(this.expandedCaption);\n    }\n    this.oneResultCaption = $$('div', { className: 'coveo-folding-oneresult-caption' }, this.options.oneResultCaption).el;\n    header.appendChild(this.oneResultCaption);\n  }\n\n  private buildResults() {\n    this.results = $$('div', { className: 'coveo-folding-results' }).el;\n    this.element.appendChild(this.results);\n  }\n\n  private buildFooter() {\n    let footer = $$('div', { className: 'coveo-folding-footer' }).el;\n    this.element.parentElement.appendChild(footer);\n\n    if (this.result.moreResults) {\n      this.showMore = $$('div', { className: 'coveo-folding-footer-section-for-less' }).el;\n      $$(this.showMore).on('click', () => this.showMoreResults());\n      footer.appendChild(this.showMore);\n\n      this.showLess = $$('div', { className: 'coveo-folding-footer-section-for-more' }).el;\n      $$(this.showLess).on('click', () => this.showLessResults());\n      footer.appendChild(this.showLess);\n\n      let footerIconShowMore = $$('div', { className: 'coveo-folding-more' }, $$('span', { className: 'coveo-folding-footer-icon' }, SVGIcons.icons.arrowDown).el).el;\n      SVGDom.addClassToSVGInContainer(footerIconShowMore, 'coveo-folding-more-svg');\n      let footerIconShowLess = $$('div', { className: 'coveo-folding-less' }, $$('span', { className: 'coveo-folding-footer-icon' }, SVGIcons.icons.arrowUp).el).el;\n      SVGDom.addClassToSVGInContainer(footerIconShowLess, 'coveo-folding-less-svg');\n      let showMoreLink = $$('a', { className: 'coveo-folding-show-more' }, this.options.moreCaption).el;\n      let showLessLink = $$('a', { className: 'coveo-folding-show-less' }, this.options.lessCaption).el;\n      this.showMore.appendChild(showMoreLink);\n      this.showLess.appendChild(showLessLink);\n      this.showMore.appendChild(footerIconShowMore);\n      this.showLess.appendChild(footerIconShowLess);\n    }\n  }\n\n  private updateElementVisibility(subResultsLength?: number) {\n    if (this.normalCaption) {\n      $$(this.normalCaption).toggle(!this.showingMoreResults && this.result.childResults.length > 0);\n    }\n    if (this.expandedCaption) {\n      $$(this.expandedCaption).toggle(this.showingMoreResults);\n    }\n    $$(this.oneResultCaption).toggleClass('coveo-hidden', !(subResultsLength && subResultsLength == 1));\n\n    if (this.showMore) {\n      $$(this.showMore).toggle(!this.showingMoreResults && !Utils.exists(this.moreResultsPromise));\n      $$(this.showLess).toggle(this.showingMoreResults);\n    }\n\n    let showIfNormal = $$(this.element).find('.coveo-show-if-normal');\n    if (showIfNormal) {\n      $$(showIfNormal).toggle(!this.showingMoreResults);\n    }\n\n    let showIfExpanded = $$(this.element).find('.coveo-show-if-expanded');\n    if (showIfExpanded) {\n      $$(showIfExpanded).toggle(this.showingMoreResults);\n    }\n  }\n\n  private scrollToResultElement() {\n    let resultElem = $$(this.element).closest('CoveoResult');\n    window.scrollTo(0, window.scrollY + resultElem.getBoundingClientRect().top);\n  }\n\n  private displayThoseResults(results: IQueryResult[]): Promise<boolean> {\n    const childResultsPromises = _.map(results, (result) => {\n      return this.renderChildResult(result);\n    });\n\n    return Promise.all(childResultsPromises).then((childsToAppend: HTMLElement[]) => {\n      $$(this.results).empty();\n      _.each(childsToAppend, (oneChild) => {\n        this.results.appendChild(oneChild);\n      });\n      return true;\n    });\n  }\n\n  private renderChildResult(childResult: IQueryResult): Promise<HTMLElement> {\n    QueryUtils.setStateObjectOnQueryResult(this.queryStateModel.get(), childResult);\n    QueryUtils.setSearchInterfaceObjectOnQueryResult(this.searchInterface, childResult);\n\n    return this.options.resultTemplate.instantiateToElement(childResult, {\n      wrapInDiv: false,\n      checkCondition: false,\n      responsiveComponents: this.searchInterface.responsiveComponents\n    }).then((oneChild: HTMLElement) => {\n      $$(oneChild).addClass('coveo-result-folding-child-result');\n\n      $$(oneChild).toggleClass('coveo-normal-child-result', !this.showingMoreResults);\n      $$(oneChild).toggleClass('coveo-expanded-child-result', this.showingMoreResults);\n      return this.autoCreateComponentsInsideResult(oneChild, childResult).initResult.then(() => {\n        return oneChild;\n      });\n    });\n  }\n\n  private autoCreateComponentsInsideResult(element: HTMLElement, result: IQueryResult): IInitResult {\n    Assert.exists(element);\n\n    let initOptions = this.searchInterface.options;\n    let initParameters: IInitializationParameters = { options: initOptions, bindings: this.getBindings(), result: result };\n    return Initialization.automaticallyCreateComponentsInside(element, initParameters);\n  }\n\n  private cancelAnyPendingShowMore() {\n    if (this.moreResultsPromise) {\n      this.moreResultsPromise = undefined;\n    }\n\n    Assert.doesNotExists(this.moreResultsPromise);\n    Assert.doesNotExists(this.waitAnimation);\n  }\n\n  private bindOverlayEvents() {\n    this.bind.one(this.element.parentElement, 'openCardOverlay', () => {\n      if (this.result.moreResults) {\n        this.showMoreResults();\n      }\n    });\n  }\n}\n\nInitialization.registerAutoCreateComponent(ResultFolding);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultFolding/ResultFolding.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultFolding.scss\n// module id = 607\n// module chunks = 19 70","import { Template } from '../Templates/Template';\nimport { IQueryResult } from '../../rest/QueryResult';\n\nexport class DefaultFoldingTemplate extends Template {\n\n  constructor() {\n    super();\n  }\n\n  instantiateToString(queryResult?: IQueryResult): string {\n    return '<div class=\"coveo-child-result\"><span class=\"CoveoIcon\"></span> <a class=\"CoveoResultLink\"></a> <span class=\"CoveoQuickview\"></span></div>';\n  }\n\n  getType() {\n    return 'DefaultFoldingTemplate';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultFolding/DefaultFoldingTemplate.ts"],"sourceRoot":""}