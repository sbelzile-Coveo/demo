webpackJsonpCoveo__temporary([67],{98:function(module,exports,__webpack_require__){"use strict";function showOnlyWithHelper(e,t){return null==t&&(t={}),t.helpers=e,t}var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Component_1=__webpack_require__(8),ComponentOptions_1=__webpack_require__(9),Initialization_1=__webpack_require__(2),TemplateHelpers_1=__webpack_require__(69),Assert_1=__webpack_require__(7),DateUtils_1=__webpack_require__(29),QueryStateModel_1=__webpack_require__(13),AnalyticsActionListMeta_1=__webpack_require__(12),Utils_1=__webpack_require__(5),Dom_1=__webpack_require__(3),_=__webpack_require__(1),GlobalExports_1=__webpack_require__(4),StringUtils_1=__webpack_require__(20),FieldValue=function(_super){function FieldValue(e,t,n,o,i){void 0===i&&(i=FieldValue.ID);var p=_super.call(this,e,i,n)||this;if(p.element=e,p.options=t,p.result=o,p.options=ComponentOptions_1.ComponentOptions.initOptions(e,FieldValue.simpleOptions,t),null!=p.options.helper){p.options=ComponentOptions_1.ComponentOptions.initOptions(e,FieldValue.helperOptions,p.options);var l=_.keys(FieldValue.options.helperOptions.subOptions),a=_.filter(l,function(e){var t=FieldValue.options.helperOptions.subOptions[e];if(t){var n=t.helpers;return null!=n&&_.contains(n,p.options.helper)}return!1});p.options.helperOptions=_.omit(p.options.helperOptions,function(e,t){return!_.contains(a,t)})}p.result=p.result||p.resolveResult(),Assert_1.Assert.exists(p.result);var s=p.getValue();if(null==s)null!=p.element.parentElement&&p.element.parentElement.removeChild(p.element);else{var r=void 0;_.isArray(s)?r=s:p.options.splitValues?_.isString(s)&&(r=_.map(s.split(p.options.separator),function(e){return e.trim()})):(s=s.toString(),r=[s]),p.appendValuesToDom(r),null!=p.options.textCaption&&p.prependTextCaptionToDom()}return p}return __extends(FieldValue,_super),FieldValue.prototype.getValue=function(){var e=Utils_1.Utils.getFieldValue(this.result,this.options.field);return!_.isArray(e)&&_.isObject(e)&&(e=null),e},FieldValue.prototype.renderOneValue=function(e){var t=Dom_1.$$("span").el,n=e;if(this.options.helper){n=TemplateHelpers_1.TemplateHelpers.getHelper(this.options.helper).call(this,e,this.getHelperOptions());var o=this.getFullDate(e,this.options.helper);o&&t.setAttribute("title",o)}return"date"!=this.options.helper&&"dateTime"!=this.options.helper&&"emailDateTime"!=this.options.helper||(n=StringUtils_1.StringUtils.capitalizeFirstLetter(n)),this.options.htmlValue?t.innerHTML=n:t.appendChild(document.createTextNode(n)),this.bindEventOnValue(t,e),t},FieldValue.prototype.getValueContainer=function(){return this.element},FieldValue.prototype.getHelperOptions=function(){var inlineOptions=ComponentOptions_1.ComponentOptions.loadStringOption(this.element,"helperOptions",{});return Utils_1.Utils.isNonEmptyString(inlineOptions)?_.extend({},this.options.helperOptions,eval("("+inlineOptions+")")):this.options.helperOptions},FieldValue.prototype.getFullDate=function(e,t){var n={useLongDateFormat:!0,useTodayYesterdayAndTomorrow:!1,useWeekdayIfThisWeek:!1,omitYearIfCurrentOne:!1};return"date"==t?DateUtils_1.DateUtils.dateToString(new Date(parseInt(e)),n):"dateTime"==t||"emailDateTime"==t?DateUtils_1.DateUtils.dateTimeToString(new Date(parseInt(e)),n):""},FieldValue.prototype.appendValuesToDom=function(e){var t=this;_.each(e,function(n,o){void 0!=n&&(t.getValueContainer().appendChild(t.renderOneValue(n)),o!==e.length-1&&t.getValueContainer().appendChild(document.createTextNode(t.options.displaySeparator)))})},FieldValue.prototype.renderTextCaption=function(){return Dom_1.$$("span",{className:"coveo-field-caption"},_.escape(this.options.textCaption)).el},FieldValue.prototype.prependTextCaptionToDom=function(){var e=this.getValueContainer();Dom_1.$$(e).prepend(this.renderTextCaption()),Dom_1.$$(e).addClass("coveo-with-label")},FieldValue.prototype.bindEventOnValue=function(e,t){var n=this;if(!Utils_1.Utils.isUndefined(Coveo.FacetRange)){var o=QueryStateModel_1.QueryStateModel.getFacetId(this.options.facet),i=_.filter(this.componentStateModel.get(o),function(e){return!e.disabled&&Coveo.FacetRange&&!(e instanceof Coveo.FacetRange)});if(i.length>0){var p=_.find(i,function(e){var n=e.values.get(t);return n&&n.selected});Dom_1.$$(e).on("click",function(){null!=p?_.each(i,function(e){return e.deselectValue(t)}):_.each(i,function(e){return e.selectValue(t)}),n.queryController.deferExecuteQuery({beforeExecuteQuery:function(){return n.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.documentField,{facetId:n.options.facet,facetValue:t.toLowerCase()})}})}),p&&Dom_1.$$(e).addClass("coveo-selected"),Dom_1.$$(e).addClass("coveo-clickable")}}},FieldValue}(Component_1.Component);FieldValue.ID="FieldValue",FieldValue.doExport=function(){GlobalExports_1.exportGlobally({FieldValue:FieldValue})},FieldValue.options={field:ComponentOptions_1.ComponentOptions.buildFieldOption({defaultValue:"@field",required:!0}),facet:ComponentOptions_1.ComponentOptions.buildStringOption({postProcessing:function(e,t){return e||t.field}}),htmlValue:ComponentOptions_1.ComponentOptions.buildBooleanOption({defaultValue:!1}),splitValues:ComponentOptions_1.ComponentOptions.buildBooleanOption({defaultValue:!1}),separator:ComponentOptions_1.ComponentOptions.buildStringOption({depend:"splitValues",defaultValue:";"}),displaySeparator:ComponentOptions_1.ComponentOptions.buildStringOption({depend:"splitValues",defaultValue:", "}),helper:ComponentOptions_1.ComponentOptions.buildHelperOption(),helperOptions:ComponentOptions_1.ComponentOptions.buildObjectOption({subOptions:{text:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),target:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),class:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),decimals:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["currency"],{min:0})),symbol:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["currency"])),useTodayYesterdayAndTomorrow:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),useWeekdayIfThisWeek:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),omitYearIfCurrentOne:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),useLongDateFormat:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!1})),includeTimeIfToday:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),includeTimeIfThisWeek:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),alwaysIncludeTime:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!1})),predefinedFormat:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"])),companyDomain:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["email"])),lengthLimit:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["email"],{min:1})),truncateName:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["email"])),alt:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),height:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),width:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),presision:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["size"],{min:0,defaultValue:2})),base:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["size"],{min:0,defaultValue:0})),isMilliseconds:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["timeSpan"]))}}),textCaption:ComponentOptions_1.ComponentOptions.buildLocalizedStringOption()},FieldValue.simpleOptions=_.omit(FieldValue.options,"helperOptions"),FieldValue.helperOptions={helperOptions:FieldValue.options.helperOptions},exports.FieldValue=FieldValue,Initialization_1.Initialization.registerAutoCreateComponent(FieldValue)}});