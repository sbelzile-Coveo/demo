webpackJsonpCoveo__temporary([12],{16:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.addClassToSVGInContainer=function(t,o){var n=t.querySelector("svg");n.setAttribute("class",""+e.getClass(n)+o)},e.removeClassFromSVGInContainer=function(t,o){var n=t.querySelector("svg");n.setAttribute("class",e.getClass(n).replace(o,""))},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=n},268:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();n.quickviewLoaded="quickviewLoaded",n.openQuickview="openQuickview",t.QuickviewEvents=n},315:function(e,t,o){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=o(8),r=o(9),a=o(45),s=o(3),l=o(647),u=o(32),c=o(20),d=o(648),p=o(13),h=o(268),m=o(2),v=o(23),g=o(27),f=o(4);o(602);var w=o(15),y=o(16),b=function(t){function o(e,n,i,a,c){void 0===c&&(c=g.ModalBox);var d=t.call(this,e,o.ID,i)||this;if(d.element=e,d.options=n,d.bindings=i,d.result=a,d.ModalBox=c,d.options=r.ComponentOptions.initComponentOptions(e,o,n),null==d.options.contentTemplate&&(d.options.contentTemplate=new l.DefaultQuickviewTemplate),/^\s*$/.test(d.element.innerHTML)){var p=s.$$("div",{className:"coveo-icon-for-quickview"},w.SVGIcons.icons.quickview);y.SVGDom.addClassToSVGInContainer(p.el,"coveo-icon-for-quickview-svg");var h=s.$$("div",{className:"coveo-caption-for-icon",tabindex:0},"Quickview".toLocaleString()).el,m=s.$$("div");m.append(p.el),m.append(h),s.$$(d.element).append(m.el)}return d.bindClick(a),d.bindings.resultElement&&d.bind.on(d.bindings.resultElement,u.ResultListEvents.openQuickview,function(){return d.open()}),d}return n(o,t),o.prototype.open=function(){var e=this;if(null==this.modalbox){o.resultCurrentlyBeingRendered=this.result,s.$$(document.activeElement).trigger("blur");var t=this.prepareOpenQuickviewObject();this.createModalBox(t).then(function(){e.bindQuickviewEvents(t),e.animateAndOpen(),e.queryStateModel.set(p.QueryStateModel.attributesEnum.quickview,e.getHashId()),o.resultCurrentlyBeingRendered=null})}},o.prototype.close=function(){null!=this.modalbox&&(this.modalbox.close(),this.modalbox=null)},o.prototype.getHashId=function(){return this.result.queryUid+"."+this.result.index+"."+c.StringUtils.hashCode(this.result.uniqueId)},o.prototype.bindClick=function(e){var t=this;if(void 0===e.hasHtmlVersion||e.hasHtmlVersion||this.options.alwaysShow){var o=function(){return t.open()};s.$$(this.element).on("click",o),this.bind.on(this.element,"keyup",v.KeyboardUtils.keypressAction(v.KEYBOARD.ENTER,o))}else this.element.style.display="none"},o.prototype.bindQuickviewEvents=function(t){s.$$(this.modalbox.content).on(h.QuickviewEvents.quickviewLoaded,function(){t.loadingAnimation instanceof HTMLElement?s.$$(t.loadingAnimation).remove():t.loadingAnimation instanceof e&&t.loadingAnimation.then(function(e){s.$$(e).remove()})})},o.prototype.animateAndOpen=function(){var e=s.$$(this.modalbox.modalBox).find("."+i.Component.computeCssClassName(d.QuickviewDocument));e&&m.Initialization.dispatchNamedMethodCallOrComponentCreation("open",e,null)},o.prototype.createModalBox=function(e){var t=this,o=s.$$("div");return e.content.then(function(e){return o.append(e.el),t.modalbox=t.ModalBox.open(o.el,{title:a.DomUtils.getQuickviewHeader(t.result,{showDate:t.options.showDate,title:t.options.title},t.bindings).el.outerHTML,className:"coveo-quick-view",validation:function(){return t.closeQuickview(),!0},body:t.element.ownerDocument.body,sizeMod:"big"}),t.setQuickviewSize(),o})},o.prototype.prepareOpenQuickviewObject=function(){var e=this.options.loadingAnimation;return{loadingAnimation:e,content:this.prepareQuickviewContent(e)}},o.prototype.prepareQuickviewContent=function(t){var o=this;return this.options.contentTemplate.instantiateToElement(this.result).then(function(n){var r=s.$$(n),a=o.searchInterface.options,l={options:a,bindings:o.getBindings(),result:o.result};return m.Initialization.automaticallyCreateComponentsInside(r.el,l).initResult.then(function(){return void 0!=r.find("."+i.Component.computeCssClassName(d.QuickviewDocument))&&o.options.enableLoadingAnimation&&(t instanceof HTMLElement?r.prepend(t):t instanceof e&&t.then(function(e){r.prepend(e)})),r})})},o.prototype.closeQuickview=function(){this.queryStateModel.set(p.QueryStateModel.attributesEnum.quickview,"")},o.prototype.setQuickviewSize=function(){var e=s.$$(s.$$(this.modalbox.modalBox).find(".coveo-modal-content"));e.el.style.width=this.options.size,e.el.style.height=this.options.size,e.el.style.maxWidth=this.options.size,e.el.style.maxHeight=this.options.size},o}(i.Component);b.ID="Quickview",b.doExport=function(){f.exportGlobally({Quickview:b,QuickviewDocument:d.QuickviewDocument})},b.options={alwaysShow:r.ComponentOptions.buildBooleanOption({defaultValue:!1}),title:r.ComponentOptions.buildStringOption(),showDate:r.ComponentOptions.buildBooleanOption({defaultValue:!0}),enableLoadingAnimation:r.ComponentOptions.buildBooleanOption({defaultValue:!0}),contentTemplate:r.ComponentOptions.buildTemplateOption({selectorAttr:"data-template-selector",idAttr:"data-template-id"}),loadingAnimation:r.ComponentOptions.buildOption(r.ComponentOptionsType.NONE,function(e){var t=e.getAttribute("data-loading-animation-selector");if(null!=t){var o=s.$$(document.documentElement).find(t);if(null!=o)return s.$$(o).detach(),o}var n=e.getAttribute("data-loading-animation-template-id");if(null!=n){var i=r.ComponentOptions.loadResultTemplateFromId(n);if(i)return i.instantiateToElement(void 0,{checkCondition:!1})}return a.DomUtils.getBasicLoadingAnimation()})},b.resultCurrentlyBeingRendered=null,t.Quickview=b,m.Initialization.registerAutoCreateComponent(b)}).call(t,o(6))},602:function(e,t){},647:function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=o(24),r=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.instantiateToString=function(e){return'<div class="coveo-quick-view-full-height"><div class="CoveoQuickviewDocument"></div></div>'},t}(i.Template);t.DefaultQuickviewTemplate=r},648:function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=o(8),r=o(9),a=o(12),s=o(7),l=o(3),u=o(268),c=o(22),d=o(5),p=o(106),h=o(2),m=o(10),v=o(1),g=function(e){function t(o,n,i,a){var l=e.call(this,o,t.ID,i)||this;return l.element=o,l.options=n,l.result=a,l.options=r.ComponentOptions.initComponentOptions(o,t,n),l.result=a||l.resolveResult(),l.termsToHighlightWereModified=!1,s.Assert.exists(l.result),l}return n(t,e),t.prototype.createDom=function(){var e=l.$$("div");e.addClass("coveo-quickview-document"),this.element.appendChild(e.el),this.header=this.buildHeader(),this.iframe=this.buildIFrame(),e.append(this.header.el),e.append(this.iframe.el)},t.prototype.open=function(){var e=this;this.ensureDom();var t=l.$$(this.element).getAttribute("href");void 0!=t&&""!=t||(t=this.result.clickUri),this.usageAnalytics.logClickEvent(a.analyticsActionCauseList.documentQuickview,{author:d.Utils.getFieldValue(this.result,"author"),documentURL:t,documentTitle:this.result.title},this.result,this.queryController.element);var o=(new Date).getTime(),n=this.iframe.find("iframe");n.src="about:blank";var i=this.queryController.getEndpoint(),r=v.keys(this.result.termsToHighlight),s={termsToHighlight:r};l.$$(this.element).trigger(u.QuickviewEvents.openQuickview,s),this.checkIfTermsToHighlightWereModified(s.termsToHighlight);var c=v.extend({},this.getBindings().queryController.getLastQuery());this.termsToHighlightWereModified&&this.handleTermsToHighlight(s.termsToHighlight,c);var p={queryObject:c,requestedOutputSize:this.options.maximumDocumentSize};i.getDocumentHtml(this.result.uniqueId,p).then(function(t){null!=n.contentDocument&&(e.renderHTMLDocument(n,t),e.triggerQuickviewLoaded(o))}).catch(function(t){null!=n.contentDocument&&(0!=t.status?(e.renderErrorReport(n,t.status),e.triggerQuickviewLoaded(o)):(n.onload=function(){e.triggerQuickviewLoaded(o)},n.src=i.getViewAsHtmlUri(e.result.uniqueId,p)))})},t.prototype.renderHTMLDocument=function(e,t){var o=this;e.onload=function(){if(o.computeHighlights(e.contentWindow),o.isNewQuickviewDocument(e.contentWindow)){l.$$(o.element).closest(".coveo-body").style.padding="0";var t=l.$$(o.element).find(".coveo-quickview-header");t.style.paddingTop="10",t.style.paddingLeft="10"}""==l.$$(o.element).find(".coveo-quickview-header").innerHTML&&(l.$$(o.element).find(".coveo-quickview-header").style.display="none")},this.writeToIFrame(e,t),this.wrapPreElementsInIframe(e)},t.prototype.renderErrorReport=function(e,t){var o="";o=400==t?"NoQuickview":"OopsError";var n="<html><body style='font-family: Arimo, 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none;' >"+m.l(o)+" </body></html>";this.writeToIFrame(e,n)},t.prototype.writeToIFrame=function(e,t){var o=t;"object"==typeof t&&(o=t.getElementsByTagName("html")[0].outerHTML),e.contentWindow.document.open();try{e.contentWindow.document.write(o)}catch(e){}e.contentWindow.document.close()},t.prototype.wrapPreElementsInIframe=function(e){try{var t=document.createElement("style");t.type="text/css";var o="html pre { white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; }";o+="body, html { font-family: Arimo, 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none; }",c.DeviceUtils.isIos()&&(o+="body, html { height: 1px !important; min-height: 100%; width: 1px !important; min-width: 100%; overflow: scroll; }",l.$$(e).setAttribute("scrolling","no"),o+="body, html {margin: auto}",e.parentElement.style.margin="0 0 5px 5px"),"styleSheet"in t?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o));e.contentWindow.document.head.appendChild(t)}catch(e){}},t.prototype.triggerQuickviewLoaded=function(e){var t=(new Date).getTime(),o={duration:t-e};l.$$(this.element).trigger(u.QuickviewEvents.quickviewLoaded,o)},t.prototype.computeHighlights=function(e){var t=this;l.$$(this.header).empty(),this.keywordsState=[];var o={},n=0;v.each(l.$$(e.document.body).findAll('[id^="CoveoHighlight"]'),function(e,i){var r=t.getHighlightIdParts(e);if(r){var a=r[1],s=parseInt(r[2],10),l=parseInt(r[3],10),u=o[a];if(null==u&&1==l?o[a]=u={text:t.getHighlightInnerText(e),count:1,index:parseInt(a,10),termsCount:"coveotaggedword"==e.nodeName.toLowerCase()?0:1,element:e,occurence:s}:u&&(u.occurence==s&&("coveotaggedword"==e.nodeName.toLowerCase()?u.text+=t.getHighlightInnerText(e):u.termsCount<l&&(u.text+=t.getHighlightInnerText(e),u.termsCount+=1)),u.count=Math.max(u.count,s),n+=1),u&&u.occurence==s&&"span"==e.nodeName.toLowerCase()){var c=t.getHightlightEmbeddedWordIdParts(e),d=c?o[c[1]]:null;d&&d.occurence==parseInt(c[2],10)&&(d.text+=e.childNodes[0].nodeValue||"")}}}),0==n&&(this.header.el.style.minHeight="0");var i=[];return v.each(o,function(o){o.text=t.resolveOriginalTermFromHighlight(o.text);var n={word:o,color:o.element.style.backgroundColor,currentIndex:0,index:o.index};t.keywordsState.push(n),l.$$(t.header).append(t.buildWordButton(n,e)),i.push(o.text)}),i},t.prototype.getHighlightIdParts=function(e){var t=e.id.substr("CoveoHighlight".length+1).match(/^([0-9]+)\.([0-9]+)\.([0-9]+)$/);return t&&t.length>3?t:null},t.prototype.getHighlightInnerText=function(e){return"coveotaggedword"==e.nodeName.toLowerCase()?e.childNodes.length>=1?e.childNodes.item(0).textContent||"":"":e.textContent||""},t.prototype.getHightlightEmbeddedWordIdParts=function(e){var t=e.getElementsByTagName("coveotaggedword")[0];return t?this.getHighlightIdParts(t):null},t.prototype.resolveOriginalTermFromHighlight=function(e){var t=this,o=e;return this.result.termsToHighlight&&(o=v.find(v.keys(this.result.termsToHighlight),function(o){return o.toLowerCase()==e.toLowerCase()||void 0!=v.find(t.result.termsToHighlight[o],function(t){return t.toLowerCase()==e.toLowerCase()})})||o),o},t.prototype.buildWordButton=function(e,t){var o=this,n=l.$$("span");n.addClass("coveo-term-for-quickview");var i=l.$$("span");i.addClass("coveo-term-for-quickview-name"),i.setHtml(e.word.text),i.on("click",function(){o.navigate(e,!1,t)}),n.append(i.el);var r=l.$$("span");r.addClass("coveo-term-for-quickview-up-arrow");var a=l.$$("span");a.addClass("coveo-term-for-quickview-up-arrow-icon"),r.append(a.el),r.on("click",function(){o.navigate(e,!0,t)}),n.append(r.el);var s=l.$$("span");s.addClass("coveo-term-for-quickview-down-arrow");var u=l.$$("span");return u.addClass("coveo-term-for-quickview-down-arrow-icon"),s.append(u.el),s.on("click",function(){o.navigate(e,!1,t)}),n.append(s.el),n.el.style.backgroundColor=e.color,n.el.style.borderColor=this.getSaturatedColor(e.color),s.el.style.borderColor=this.getSaturatedColor(e.color),n.el},t.prototype.navigate=function(e,t,o){var n,i=e.currentIndex;n=t?i<=1?e.word.count:i-1:i==e.word.count?1:i+1;var r=this.getScrollingElement(o),a=l.$$(r).find('[id^="CoveoHighlight:'+e.word.index+"."+i+'"]');a&&(a.style.border="");var s=l.$$(o.document.body).find('[id^="CoveoHighlight:'+e.word.index+"."+n+'"]');if(s.style.border="1px dotted #333",e.currentIndex=n,this.isNewQuickviewDocument(o)){var u=l.$$(s).closest(".pc");l.$$(u).addClass("opened")}s.scrollIntoView(),document.body.scrollLeft=0,document.body.scrollTop=0},t.prototype.buildHeader=function(){var e=l.$$("div");return e.addClass("coveo-quickview-header"),e},t.prototype.buildIFrame=function(){var e=l.$$("iframe");e.setAttribute("sandbox","allow-same-origin");var t=l.$$("div");return t.addClass("coveo-iframeWrapper"),t.el.appendChild(e.el),t},t.prototype.getScrollingElement=function(e){var t;return this.isNewQuickviewDocument(e)&&(t=l.$$(e.document.body).find("#page-container")),t||(t=l.$$(e.document.body).el),t},t.prototype.isNewQuickviewDocument=function(e){var t=l.$$(e.document.head).find("meta[name='generator']");return t&&"pdf2htmlEX"==t.getAttribute("content")},t.prototype.handleTermsToHighlight=function(e,t){var o=this;for(var n in this.result.termsToHighlight)delete this.result.termsToHighlight[n];var i="";v.each(e,function(e){i+=e+" ",o.result.termsToHighlight[e]=new Array(e)}),i=i.substring(0,i.length-1),t.q=i},t.prototype.checkIfTermsToHighlightWereModified=function(e){d.Utils.arrayEqual(e,v.keys(this.result.termsToHighlight))||(this.termsToHighlightWereModified=!0)},t.prototype.getSaturatedColor=function(e){var t=parseInt(e.substring(4,7)),o=parseInt(e.substring(9,12)),n=parseInt(e.substring(14,17)),i=p.ColorUtils.rgbToHsv(t,o,n);i[1]*=2,i[1]>1&&(i[1]=1);var r=p.ColorUtils.hsvToRgb(i[0],i[1],i[2]);return"rgb("+r[0].toString()+", "+r[1].toString()+", "+r[2].toString()+")"},t}(i.Component);g.ID="QuickviewDocument",g.options={maximumDocumentSize:r.ComponentOptions.buildNumberOption({defaultValue:0,min:0})},t.QuickviewDocument=g,h.Initialization.registerAutoCreateComponent(g)}});