{"version":3,"sources":["webpack:///./src/utils/SVGDom.ts?f8cf*****************","./src/ui/ResultRating/ResultRating.ts","./sass/_ResultRating.scss"],"names":[],"mappings":"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","file":"ResultRating.js","sourcesContent":["import { $$ } from './Dom';\n\nexport class SVGDom {\n\n  public static addClassToSVGInContainer(svgContainer: HTMLElement, classToAdd: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', `${SVGDom.getClass(svgElement)}${classToAdd}`);\n  }\n\n  public static removeClassFromSVGInContainer(svgContainer: HTMLElement, classToRemove: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', SVGDom.getClass(svgElement).replace(classToRemove, ''));\n  }\n\n  private static getClass(svgElement: SVGElement) {\n    const className = svgElement.getAttribute('class');\n    return className ? className + ' ' : '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SVGDom.ts","import { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { $$, Dom } from '../../utils/Dom';\nimport { Initialization } from '../Base/Initialization';\nimport { Utils } from '../../utils/Utils';\nimport { IRatingRequest } from '../../rest/RatingRequest';\nimport { exportGlobally } from '../../GlobalExports';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { SVGDom } from '../../utils/SVGDom';\nimport 'styling/_ResultRating';\n\nexport enum RatingValues { Undefined, Lowest, Low, Average, Good, Best };\n\nexport interface IResultRatingOptions {\n}\n/**\n * The `ResultRating` component renders a 5-star rating widget. Interactive rating is possible if\n * the [`enableCollaborativeRating`]{@link SearchInterface.options.enableCollaborativeRating} option of your\n * search interface is `true`, and if collaborative rating is enabled on your Coveo index.\n *\n * This component is a result template component (see [Result Templates](https://developers.coveo.com/x/aIGfAQ)).\n */\nexport class ResultRating extends Component {\n  static ID = 'ResultRating';\n\n  static doExport = () => {\n    exportGlobally({\n      'ResultRating': ResultRating\n    });\n  }\n\n  /**\n   * Creates a new `ResultRating` component.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the `ResultRating` component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The result to associate the component with.\n   */\n  constructor(public element: HTMLElement, public options?: IResultRatingOptions, public bindings?: IComponentBindings, public result?: IQueryResult) {\n    super(element, ResultRating.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, ResultRating, options);\n\n    if (!Utils.isNullOrUndefined(result.rating)) {\n      this.renderComponent(element, result.rating);\n    }\n  }\n\n  private renderComponent(element: HTMLElement, rating: number) {\n    for (let starNumber = 1; starNumber <= 5; starNumber++) {\n      this.renderStar(element, starNumber <= rating, starNumber);\n    }\n  }\n\n  private renderStar(element: HTMLElement, isChecked: boolean, value: number) {\n    let star: Dom;\n    const starElement = $$(element).find('a[rating-value=\"' + value + '\"]');\n    if (starElement == null) {\n      star = $$('a', { className: 'coveo-result-rating-star' }, SVGIcons.icons.star);\n      SVGDom.addClassToSVGInContainer(star.el, 'coveo-result-rating-star-svg');\n      element.appendChild(star.el);\n\n      if (this.bindings.searchInterface.options.enableCollaborativeRating) {\n        star.on('click', (e) => {\n          const targetElement: HTMLElement = <HTMLElement>e.currentTarget;\n          this.rateDocument(parseInt(targetElement.getAttribute('rating-value')));\n        });\n\n        star.on('mouseover', (e) => {\n          const targetElement: HTMLElement = <HTMLElement>e.currentTarget;\n          this.renderComponent(element, parseInt(targetElement.getAttribute('rating-value')));\n        });\n\n        star.on('mouseout', () => {\n          this.renderComponent(element, this.result.rating);\n        });\n      }\n\n      star.el.setAttribute('rating-value', value.toString());\n    } else {\n      star = $$(starElement);\n    }\n\n    star.toggleClass('coveo-result-rating-star-active', isChecked);\n  }\n\n  /**\n   * Rates an item using the the specified `rating` value.\n   * @param rating The rating to assign to the item.\n   *\n   * The possible values are:\n   *\n   * - `0`: renders no star.\n   * - `1`: renders 1 star.\n   * - `2`: renders 2 stars.\n   * - `3`: renders 3 stars.\n   * - `4`: renders 4 stars.\n   * - `5`: renders 5 stars.\n   */\n  public rateDocument(rating: RatingValues) {\n    const request: IRatingRequest = {\n      rating: RatingValues[rating],\n      uniqueId: this.result.uniqueId\n    };\n\n    this.queryController.getEndpoint().rateDocument(request)\n      .then(() => {\n        this.result.rating = rating;\n        this.renderComponent(this.element, rating);\n      })\n      .catch(() => {\n        this.logger.error('An error occurred while rating the item');\n      });\n  }\n}\n\nInitialization.registerAutoCreateComponent(ResultRating);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultRating/ResultRating.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultRating.scss\n// module id = 609\n// module chunks = 28 70"],"sourceRoot":""}