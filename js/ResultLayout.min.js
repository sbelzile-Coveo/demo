webpackJsonpCoveo__temporary([15],{16:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.addClassToSVGInContainer=function(e,o){var n=e.querySelector("svg");n.setAttribute("class",""+t.getClass(n)+o)},t.removeClassFromSVGInContainer=function(e,o){var n=e.querySelector("svg");n.setAttribute("class",t.getClass(n).replace(o,""))},t.getClass=function(t){var e=t.getAttribute("class");return e?e+" ":""},t}();e.SVGDom=n},255:function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=o(8),i=o(9),a=o(11),r=o(2),u=o(17),l=o(7),c=o(32),p=o(103),h=o(3),d=o(13),y=o(18),v=o(12),f=o(23),m=o(653),L=o(5),C=o(1),b=o(4),g=o(10);o(608);var R=o(15),S=o(16);e.defaultLayout="list";var E=function(t){function e(o,n,s){var r=t.call(this,o,e.ID,s)||this;return r.element=o,r.options=n,r.options=i.ComponentOptions.initComponentOptions(o,e,n),r.currentActiveLayouts={},r.bind.onQueryState(y.MODEL_EVENTS.CHANGE_ONE,d.QUERY_STATE_ATTRIBUTES.LAYOUT,r.handleQueryStateChanged.bind(r)),r.bind.onRootElement(a.QueryEvents.querySuccess,function(t){return r.handleQuerySuccess(t)}),r.bind.onRootElement(a.QueryEvents.queryError,function(t){return r.handleQueryError(t)}),r.resultLayoutSection=h.$$(r.element).closest(".coveo-result-layout-section"),r.bind.oneRootElement(u.InitializationEvents.afterComponentsInitialization,function(){return r.populate()}),r.bind.oneRootElement(u.InitializationEvents.afterInitialization,function(){return r.handleQueryStateChanged()}),m.ResponsiveResultLayout.init(r.root,r,r.options),r}return n(e,t),e.prototype.changeLayout=function(t){if(l.Assert.check(this.isLayoutDisplayedByButton(t),"Layout not available or invalid"),t!==this.currentLayout||""===this.getModelValue()){this.setModelValue(t);var e=this.queryController.getLastResults();this.setLayout(t,e),e?this.usageAnalytics.logCustomEvent(v.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:t},this.element):(this.usageAnalytics.logSearchEvent(v.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:t}),this.queryController.executeQuery())}},e.prototype.getCurrentLayout=function(){return this.currentLayout},e.prototype.disableLayouts=function(t){var e=this;if(L.Utils.isNonEmptyArray(t)){C.each(t,function(t){return e.disableLayout(t)});var o=C.difference(C.keys(this.currentActiveLayouts),t);if(C.isEmpty(o)){this.logger.error("Cannot disable the last valid layout ... Re-enabling the first one possible");var n=C.keys(this.currentActiveLayouts)[0];this.enableLayout(n),this.setLayout(n)}else{var s=C.contains(o,this.currentLayout)?this.currentLayout:o[0];this.changeLayout(s)}}},e.prototype.enableLayouts=function(t){var e=this;C.each(t,function(t){e.enableLayout(t)})},e.prototype.disableLayout=function(t){this.isLayoutDisplayedByButton(t)&&this.hideButton(t)},e.prototype.enableLayout=function(t){this.isLayoutDisplayedByButton(t)&&(this.showButton(t),this.updateSelectorAppearance())},e.prototype.hideButton=function(t){if(this.isLayoutDisplayedByButton(t)){var e=this.currentActiveLayouts[t].button;h.$$(e.el).addClass("coveo-hidden"),e.visible=!1,this.updateSelectorAppearance()}},e.prototype.showButton=function(t){if(this.isLayoutDisplayedByButton(t)){var e=this.currentActiveLayouts[t].button;h.$$(e.el).removeClass("coveo-hidden"),e.visible=!0}},e.prototype.setLayout=function(t,e){t&&(this.isLayoutDisplayedByButton(t),this.currentLayout&&h.$$(this.currentActiveLayouts[this.currentLayout].button.el).removeClass("coveo-selected"),h.$$(this.currentActiveLayouts[t].button.el).addClass("coveo-selected"),this.currentLayout=t,h.$$(this.element).trigger(c.ResultListEvents.changeLayout,{layout:t,results:e}))},e.prototype.handleQuerySuccess=function(t){this.hasNoResults=0==t.results.results.length,this.shouldShowSelector()?this.show():this.hide()},e.prototype.handleQueryStateChanged=function(t){var e=this.getModelValue(),o=C.find(C.keys(this.currentActiveLayouts),function(t){return t===e});void 0!==o?this.setLayout(o):this.setLayout(C.keys(this.currentActiveLayouts)[0])},e.prototype.handleQueryError=function(t){this.hide()},e.prototype.updateSelectorAppearance=function(){this.shouldShowSelector()?this.show():this.hide()},e.prototype.populate=function(){var t=this,o={layouts:[]};h.$$(this.root).trigger(p.ResultLayoutEvents.populateResultLayout,o),C.each(o.layouts,function(t){return l.Assert.check(C.contains(e.validLayouts,t),"Invalid layout")}),C.isEmpty(o.layouts)||(C.each(o.layouts,function(e){return t.addButton(e)}),this.shouldShowSelector()||this.hide())},e.prototype.addButton=function(t){var e=this,o=h.$$("span",{className:"coveo-result-layout-selector",tabindex:0},h.$$("span",{className:"coveo-result-layout-selector-caption"},g.l(t))),n=h.$$("span",{className:"coveo-icon coveo-"+t+"-layout-icon"},R.SVGIcons.icons[t+"Layout"]);S.SVGDom.addClassToSVGInContainer(n.el,"coveo-"+t+"-svg"),o.prepend(n.el),t===this.currentLayout&&o.addClass("coveo-selected");var s=function(){return e.changeLayout(t)};o.on("click",s),o.on("keyup",f.KeyboardUtils.keypressAction(f.KEYBOARD.ENTER,s)),h.$$(this.element).append(o.el),this.currentActiveLayouts[t]={button:{visible:!0,el:o.el},enabled:!0}},e.prototype.hide=function(){var t=this.resultLayoutSection||this.element;h.$$(t).addClass("coveo-result-layout-hidden")},e.prototype.show=function(){var t=this.resultLayoutSection||this.element;h.$$(t).removeClass("coveo-result-layout-hidden")},e.prototype.getModelValue=function(){return this.queryStateModel.get(d.QueryStateModel.attributesEnum.layout)},e.prototype.setModelValue=function(t){this.queryStateModel.set(d.QueryStateModel.attributesEnum.layout,t)},e.prototype.shouldShowSelector=function(){return C.keys(this.currentActiveLayouts).length>1&&C.filter(this.currentActiveLayouts,function(t){return t.button.visible}).length>1&&!this.hasNoResults},e.prototype.isLayoutDisplayedByButton=function(t){return C.contains(C.keys(this.currentActiveLayouts),t)},e}(s.Component);E.ID="ResultLayout",E.doExport=function(){b.exportGlobally({ResultLayout:E})},E.validLayouts=["list","card","table"],E.options={mobileLayouts:i.ComponentOptions.buildListOption({defaultValue:["card","table"]}),tabletLayouts:i.ComponentOptions.buildListOption({defaultValue:["list","card","table"]}),desktopLayouts:i.ComponentOptions.buildListOption({defaultValue:["list","card","table"]})},e.ResultLayout=E,r.Initialization.registerAutoCreateComponent(E)},608:function(t,e){},653:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(78),s=o(3),i=o(8),a=o(255),r=o(14),u=o(21),l=o(1),c=function(){function t(t,e,o,n){this.coveoRoot=t,this.ID=e,this.searchInterface=i.Component.get(this.coveoRoot.el,u.SearchInterface,!1)}return t.init=function(e,o,u){if(!s.$$(e).find("."+i.Component.computeCssClassName(a.ResultLayout))){return void new r.Logger("ResponsiveResultLayout").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}n.ResponsiveComponentsManager.register(t,s.$$(e),a.ResultLayout.ID,o,u)},t.prototype.registerComponent=function(t){return t instanceof a.ResultLayout&&(this.resultLayout=t,!0)},t.prototype.handleResizeEvent=function(){this.needSmallMode()?this.enableAndDisableLayouts(this.resultLayout.options.mobileLayouts):this.needMediumMode()?this.enableAndDisableLayouts(this.resultLayout.options.tabletLayouts):this.enableAndDisableLayouts(this.resultLayout.options.desktopLayouts)},t.prototype.enableAndDisableLayouts=function(t){var e=l.difference(a.ResultLayout.validLayouts,t),o=l.intersection(a.ResultLayout.validLayouts,t);this.resultLayout.disableLayouts(e),this.resultLayout.enableLayouts(o)},t.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth()},t.prototype.needMediumMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth()},t}();e.ResponsiveResultLayout=c},78:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(3),s=o(17),i=o(8),a=o(21),r=o(5),u=o(1),l=o(11),c=o(14),p=function(){function t(e){var o=this;this.disabledComponents=[],this.responsiveComponents=[],this.coveoRoot=e,this.searchInterface=i.Component.get(this.coveoRoot.el,a.SearchInterface,!1),this.dropdownHeadersWrapper=n.$$("div",{className:t.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}),this.searchBoxElement=this.getSearchBoxElement(),this.logger=new c.Logger(this),this.resizeListener=u.debounce(function(){0!=o.coveoRoot.width()?(o.addDropdownHeaderWrapperIfNeeded(),o.shouldSwitchToSmallMode()?o.coveoRoot.addClass("coveo-small-interface"):o.shouldSwitchToSmallMode()||o.coveoRoot.removeClass("coveo-small-interface"),u.each(o.responsiveComponents,function(t){t.handleResizeEvent()})):o.logger.warn("The width of the search interface is 0, cannot dispatch resize events to responsive components. This means that the tabs will not\n        automatically fit in the tab section. Also, the facet and recommendation component will not hide in a menu. Could the search\n        interface display property be none? Could its visibility property be set to hidden? Also, if either of these scenarios happen during\n        loading, it could be the cause of this issue.")},t.RESIZE_DEBOUNCE_DELAY,!0),window.addEventListener("resize",this.resizeListener),this.bindNukeEvents()}return t.register=function(e,o,n,i,a){var p=this;(a.initializationEventRoot||o).on(s.InitializationEvents.afterInitialization,function(){if(p.shouldEnableResponsiveMode(o)){var s=u.find(p.componentManagers,function(t){return o.el==t.coveoRoot.el});if(s||(s=new t(o),p.componentManagers.push(s)),!r.Utils.isNullOrUndefined(a.enableResponsiveMode)&&!a.enableResponsiveMode)return void s.disableComponent(n);p.componentInitializations.push({responsiveComponentsManager:s,arguments:[e,o,n,i,a]})}if(0==--p.remainingComponentInitializations)if(p.instantiateResponsiveComponents(),0==o.width()){var h=new c.Logger("ResponsiveComponentsManager");h.info("Search interface width is 0, cannot dispatch resize events to responsive components. Will try again after first\n          query success."),o.one(l.QueryEvents.querySuccess,function(){p.resizeAllComponentsManager()})}else p.resizeAllComponentsManager()}),this.remainingComponentInitializations++},t.shouldEnableResponsiveMode=function(t){var e=i.Component.get(t.el,a.SearchInterface,!0);return e instanceof a.SearchInterface&&e.options.enableAutomaticResponsiveMode},t.instantiateResponsiveComponents=function(){u.each(this.componentInitializations,function(t){var e=t.responsiveComponentsManager;e.register.apply(e,t.arguments)})},t.resizeAllComponentsManager=function(){u.each(this.componentManagers,function(t){t.resizeListener()})},t.prototype.register=function(t,e,o,n,s){if(!this.isDisabled(o)){if(!this.isActivated(o)){var i=new t(e,o,s);this.isTabs(o)?this.responsiveComponents.push(i):this.responsiveComponents.unshift(i)}u.each(this.responsiveComponents,function(t){null!=t.registerComponent&&t.registerComponent(n)})}},t.prototype.disableComponent=function(t){this.disabledComponents.push(t)},t.prototype.isDisabled=function(t){return-1!=u.indexOf(this.disabledComponents,t)},t.prototype.shouldSwitchToSmallMode=function(){var t=this.needDropdownWrapper(),e=this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth();return t||e},t.prototype.needDropdownWrapper=function(){for(var t=0;t<this.responsiveComponents.length;t++){var e=this.responsiveComponents[t];if(e.needDropdownWrapper&&e.needDropdownWrapper())return!0}return!1},t.prototype.addDropdownHeaderWrapperIfNeeded=function(){if(this.needDropdownWrapper()){var t=n.$$(this.coveoRoot).find(".coveo-tab-section");this.searchBoxElement?this.dropdownHeadersWrapper.insertAfter(this.searchBoxElement):t?this.dropdownHeadersWrapper.insertAfter(t):this.coveoRoot.prepend(this.dropdownHeadersWrapper.el)}},t.prototype.isTabs=function(t){return"Tab"==t},t.prototype.isActivated=function(t){return void 0!=u.find(this.responsiveComponents,function(e){return e.ID==t})},t.prototype.getSearchBoxElement=function(){var t=this.coveoRoot.find(".coveo-search-section");return t||this.coveoRoot.find(".CoveoSearchbox")},t.prototype.bindNukeEvents=function(){var t=this;n.$$(this.coveoRoot).on(s.InitializationEvents.nuke,function(){window.removeEventListener("resize",t.resizeListener)})},t}();p.DROPDOWN_HEADER_WRAPPER_CSS_CLASS="coveo-dropdown-header-wrapper",p.RESIZE_DEBOUNCE_DELAY=200,p.componentManagers=[],p.remainingComponentInitializations=0,p.componentInitializations=[],e.ResponsiveComponentsManager=p}});