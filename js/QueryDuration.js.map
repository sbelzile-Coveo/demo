{"version":3,"sources":["./src/ui/QueryDuration/QueryDuration.ts","./sass/_QueryDuration.scss"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,yCAA8C;AAE9C,gDAA4D;AAC5D,4CAA+E;AAC/E,sCAA2C;AAC3C,mCAAqC;AACrC,wCAA0C;AAC1C,8CAAwD;AACxD,wCAAuC;AACvC,6CAAqD;AAErD,yBAAgC;AAKhC;;;;;;;GAOG;AACH;IAAmC,iCAAS;IAc1C;;;;;;;OAOG;IACH,uBAAmB,OAAoB,EAAS,OAA+B,EAAE,QAA6B;QAA9G,YACE,kBAAM,OAAO,EAAE,aAAa,CAAC,EAAE,EAAE,QAAQ,CAAC,SAS3C;QAVkB,aAAO,GAAP,OAAO,CAAa;QAAS,aAAO,GAAP,OAAO,CAAwB;QAG7E,KAAI,CAAC,OAAO,GAAG,mCAAgB,CAAC,oBAAoB,CAAC,OAAO,EAAE,aAAa,EAAE,OAAO,CAAC,CAAC;QAEtF,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,YAAY,EAAE,UAAC,IAA4B,IAAK,YAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAA7B,CAA6B,CAAC,CAAC;QACnH,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,UAAU,EAAE,cAAM,eAAE,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAvB,CAAuB,CAAC,CAAC;QAC/E,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACpC,KAAI,CAAC,aAAa,GAAG,QAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC;QACnC,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;;IAC/C,CAAC;IAEO,0CAAkB,GAA1B,UAA2B,IAA4B;QACrD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACtD,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAEpB,IAAI,OAAO,GAAG;gBACZ,WAAC,CAAC,UAAU,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;gBACpE,WAAC,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;gBACnE,WAAC,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;gBACxE,WAAC,CAAC,gBAAgB,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;aAC3E,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEb,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;YACvF,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YAC5C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC;QACxC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACtC,CAAC;IACH,CAAC;IAEO,2CAAmB,GAA3B,UAA4B,gBAAwB;QAClD,EAAE,CAAC,CAAC,gBAAgB,IAAI,SAAS,CAAC,CAAC,CAAC;YAClC,MAAM,CAAC,WAAC,CAAC,aAAa,CAAC,CAAC;QAC1B,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,GAAG,IAAI,EAAE,IAAI,CAAC,CAAC;YACtD,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,WAAC,CAAC,SAAS,EAAE,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;YACtE,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,WAAC,CAAC,SAAS,EAAE,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC;YAChE,CAAC;QACH,CAAC;IACH,CAAC;IACH,oBAAC;AAAD,CAAC,CAjEkC,qBAAS;AACnC,gBAAE,GAAG,eAAe,CAAC;AAErB,sBAAQ,GAAG;IAChB,8BAAc,CAAC;QACb,eAAe,EAAE,aAAa;KAC/B,CAAC,CAAC;AACL,CAAC;AAEM,qBAAO,GAA0B,EACvC,CAAC;AAVS,sCAAa;AAkE1B,+BAAc,CAAC,2BAA2B,CAAC,aAAa,CAAC,CAAC;;;;;;;;AC1F1D,yC","file":"QueryDuration.js","sourcesContent":["import { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { QueryEvents, IQuerySuccessEventArgs } from '../../events/QueryEvents';\nimport { Assert } from '../../misc/Assert';\nimport { $$ } from '../../utils/Dom';\nimport { l } from '../../strings/Strings';\nimport { Initialization } from '../Base/Initialization';\nimport * as Globalize from 'globalize';\nimport { exportGlobally } from '../../GlobalExports';\n\nimport 'styling/_QueryDuration';\n\nexport interface IQueryDurationOptions {\n}\n\n/**\n * The QueryDuration component displays the duration of the last query execution.\n *\n * When a {@link QueryEvents.querySuccess} event is triggered, the QueryDuration component becomes visible. It also\n * displays the global duration, the index duration, the proxy duration, and the client duration in a single tooltip.\n *\n * If a {@link QueryEvents.queryError} event is triggered, the QueryDuration component becomes hidden.\n */\nexport class QueryDuration extends Component {\n  static ID = 'QueryDuration';\n\n  static doExport = () => {\n    exportGlobally({\n      'QueryDuration': QueryDuration\n    });\n  }\n\n  static options: IQueryDurationOptions = {\n  };\n\n  private textContainer: HTMLElement;\n\n  /**\n   * Creates a new QueryDuration component.\n   * Binds handlers on the {@link QueryEvents.querySuccess} and {@link QueryEvents.queryError} events.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the QueryDuration component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   */\n  constructor(public element: HTMLElement, public options?: IQueryDurationOptions, bindings?: IComponentBindings) {\n    super(element, QueryDuration.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(element, QueryDuration, options);\n\n    this.bind.onRootElement(QueryEvents.querySuccess, (data: IQuerySuccessEventArgs) => this.handleQuerySuccess(data));\n    this.bind.onRootElement(QueryEvents.queryError, () => $$(this.element).hide());\n    this.element.style.display = 'none';\n    this.textContainer = $$('span').el;\n    this.element.appendChild(this.textContainer);\n  }\n\n  private handleQuerySuccess(data: IQuerySuccessEventArgs) {\n    if (!this.disabled && data.results.results.length > 0) {\n      Assert.exists(data);\n\n      let tooltip = [\n        l('Duration', this.formatQueryDuration(data.results.clientDuration)),\n        l('IndexDuration', this.formatQueryDuration(data.results.duration)),\n        l('ProxyDuration', this.formatQueryDuration(data.results.proxyDuration)),\n        l('ClientDuration', this.formatQueryDuration(data.results.clientDuration))\n      ].join('\\n');\n\n      this.textContainer.textContent = this.formatQueryDuration(data.results.clientDuration);\n      this.element.setAttribute('title', tooltip);\n      this.element.style.display = 'inline';\n    } else {\n      this.element.style.display = 'none';\n    }\n  }\n\n  private formatQueryDuration(durationInMillis: number): string {\n    if (durationInMillis == undefined) {\n      return l('Unavailable');\n    } else {\n      var seconds = Math.max(durationInMillis / 1000, 0.01);\n      if (String['locale'] === 'en') {\n        return l('Seconds', Globalize.format(seconds, 'n2'), seconds, true);\n      } else {\n        return l('Seconds', Globalize.format(seconds, 'n2'), seconds);\n      }\n    }\n  }\n}\nInitialization.registerAutoCreateComponent(QueryDuration);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/QueryDuration/QueryDuration.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_QueryDuration.scss\n// module id = 600\n// module chunks = 56 70"],"sourceRoot":""}